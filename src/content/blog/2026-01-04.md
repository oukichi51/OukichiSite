---
title: 'Astro プロジェクト構成と GitHub Pages デプロイ手順'
description: 'Astroを使用してGitHubPagesを作成してみたので、忘れないように記事に残しておきます。'
pubDate: '2026-01-04'
heroImage: '../../assets/2026-01-04_hero.png'
tags:
  - '2026年の投稿'
  - 'GitHub'
  - 'Astro'
  - '学習ログ'
---

## 結論

Astro でブログ（または静的サイト）を作るなら、まずは **「ファイル構成の役割」** と **「GitHub Pages 向けの `site` / `base` 設定」**を押さえるのが近道です。  
特に GitHub Pages ではリポジトリ名が URL に入ることが多いため、**`base: '/<repo>/'` の設定が重要**になります。

---

## 手順

### 1. ファイル構成を理解する
Astro のプロジェクトはディレクトリごとに役割が分かれています。
#### `src/pages`
ページのファイルをまとめたディレクトリです。  
Astro は **ファイルベースルーティング**を採用しています。

**ファイルベースルーティングとは？**  
URL 構造がフォルダ / ファイル構成で決まるルーティングのことです。</br>
例：
- `src/pages/about.tsx` → `/about`
- `src/pages/blog/[slug].tsx` → `/blog/◯◯`（動的ルート）

#### `src/components`

ヘッダーやフッターなど、ページ内で共通の要素をまとめたディレクトリです。

#### `src/layouts`

共通の外枠（レイアウト）を定義するディレクトリです。  
ブログ記事なら「ヒーロー画像 → タイトル → 本文」のように必ず表示する順番を決めるなど、フレームワーク的な部分の取り決めを行います。

#### `public/`

静的ファイルを配置するディレクトリです（`favicon.svg` など）。  
**ビルド時には加工されない**点がポイントです。

#### `src/assets`

こちらも静的ファイルを配置するディレクトリですが、**Astro/Vite 経由で処理・最適化され得る**のが `public/` との違いです。</br>
- 圧縮
- ハッシュ付与（キャッシュ最適化）
- `import` して利用可能

例：
```ts
import hero from "../assets/hero.png";
```

#### `src/styles`

CSS 置き場です。

#### `src/content`

Markdown / MDX でブログ記事を格納するディレクトリです。

---

### 2. GitHub Pages 用の設定を行う

#### 2-1. `astro.config.mjs` を変更する

もともと設定されていた内容を以下のように変更します。
```js
export default defineConfig({
  site: 'https://oukichi51.github.io',
  base: '/OukichiSite/',
  integrations: [mdx(), sitemap()],
});
```

特筆すべき点は **`base` の設定**です。

GitHub Pages の URL を「リポジトリ名を含む形」で使う場合（例：`https://ユーザー名.github.io/リポジトリ名/`）、  
`base: '/リポジトリ名/'` を設定して **ベースのルートを確保**します。

#### 2-2. `consts.ts` を変更する

サイト名やサイト説明が定数化されているので、任意のものに変更できます。  
当ブログでは以下のように変更しました。

```ts
export const SITE_TITLE = 'Oukichi Blog';
export const SITE_DESCRIPTION = 'Welcome to Oukichi Blog!';
```

---

### 3. デプロイする

#### 3-1. ビルドする

`astro build` でビルド可能です。  
ビルド時にはルートディレクトリに `dist` ディレクトリが作成され、Astro が `dist` 内に静的ウェブサイトを構築してくれます。

#### 3-2. デプロイ方法を選ぶ

思いつく方法は 2 つあります。
1. `dist` をそのまま `gh-pages` ブランチ（既定）に push する方法  
2. GitHub Actions でビルドして、GitHub Pages に採用する方法

今回は、
- ソースコードも管理したい
- リポジトリが分岐する運用は管理しきれない

という理由から、後者の **「GitHub Actions でビルドして GitHub Pages に採用する方法」**を採用しました。

設定はドキュメント通り追加しただけなので詳細は省きます。  
公式ドキュメントはこちら：  
https://docs.astro.build/en/guides/deploy/github/

---

## ハマりポイント

### `base` を設定していない（または間違っている）

GitHub Pages で `https://ユーザー名.github.io/リポジトリ名/` の形式を使う場合、`base` を指定しないと

- CSS が読み込めない
- 画像が表示されない
- リンクが壊れる

などが起こりやすいです。
その場合は以下のように **`base: '/リポジトリ名/'`** を設定します。

```js
export default defineConfig({
  site: 'https://oukichi51.github.io',
  base: '/OukichiSite/',
});
```

上記の対応をした場合、ドキュメントにもありますが、Astro内のURL全てに `/リポジトリ名/` を設定しないと、 **404 Not Found** になってしまうので注意が必要です。
(私はこれでハマりました)

---

## まとめ

- Astro は **ファイルベースルーティング**なので `src/pages` の構成が URL になる  
- `components` は共通パーツ、`layouts` は共通の外枠  
- 静的ファイルは `public/`（加工されない）か `src/assets/`（最適化され得る）に置く  
- GitHub Pages では **`site` と `base` の設定が重要**。特に `base` が抜けると表示崩れの原因になりやすい  
- デプロイは `astro build` で `dist` が生成され、運用は GitHub Actions 経由が管理しやすい
